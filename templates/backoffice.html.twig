<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
        {% block title %}Backoffice{% endblock %}
    </title>
    <link rel="icon" href="images/logo.png">
    {# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
    {% block stylesheets %}
        {{ encore_entry_link_tags('app_css') }}
    {% endblock %}

    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
        {# IO Icons #}
        <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

        <script>
            function removeFlash(id) {
                document.getElementById(id).remove();
            }

            addEventListener('DOMContentLoaded', () => {
                const flash = document.querySelectorAll('[flash]');
                flash.forEach((element) => {
                    setTimeout(() => {
                        element.remove();
                    }, 3000);
                });
            });
        </script>
    {% endblock %}

</head>

<body class="flex">
    
    {# SIDEBAR #}

    {% if  'ROLE_SUPER_ADMIN' %}
        {% set sidebar =  'components/layouts/super_admin/sidebar.html.twig'%}
    {% elseif 'ROLE_COMPANY_ADMIN' in app.user.roles %}
        {% set sidebar =  'components/layouts/admin/sidebar.html.twig'%}
    {% else %}
        {% set sidebar =  'components/layouts/admin/sidebar.html.twig'%}
    {% endif %}



    {% include sidebar %}
    

    <div class="flex flex-col flex-1 h-screen">
        {# HEADER #}
        {% include 'components/layouts/admin/header.html.twig' %}
            
        <main class="flex-1 px-8 pt-8 relative">
            {% block body %}{% endblock %}

            {% include 'components/flashes/flash.html.twig' %}
        </main>

    </div>
</body>
</html>
